import{_ as M,o as x,e as S,f as a,u as P,r as z,a as g,v as W,x as $,I as D,N as R,y as U,B as E,z as q,h,w as y,g as s,A as _,C as F,D as j,t as b,E as A,H as J,J as K,K as G}from"./index.9b9bc760.js";import{l as O,s as w,r as Q}from"./index.b86119d7.js";const X=""+new URL("logo.1e8c34ec.png",import.meta.url).href;const Y={name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:16},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:38}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){let o=this.randomNum(e,t),i=this.randomNum(e,t),l=this.randomNum(e,t);return"rgb("+o+","+i+","+l+")"},drawPic(){let t=document.getElementById("s-canvas").getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let o=0;o<this.identifyCode.length;o++)this.drawText(t,this.identifyCode[o],o);this.drawLine(t),this.drawDot(t)},drawText(e,t,o){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";let i=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),l=this.randomNum(this.fontSizeMax,this.contentHeight-5);var r=this.randomNum(-45,45);e.translate(i,l),e.rotate(r*Math.PI/180),e.fillText(t,0,0),e.rotate(-r*Math.PI/180),e.translate(-i,-l)},drawLine(e){for(let t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},Z={class:"s-canvas"},ee=["width","height"];function te(e,t,o,i,l,r){return x(),S("div",Z,[a("canvas",{id:"s-canvas",width:o.contentWidth,height:o.contentHeight},null,8,ee)])}const oe=M(Y,[["render",te]]);const k=e=>(J("data-v-523ee59a"),e=e(),K(),e),ne={class:"login"},ie=k(()=>a("img",{src:X,width:"100",class:"logo",alt:""},null,-1)),se={class:"login-form"},ae={style:{display:"flex",width:"100%","margin-top":"10px"}},le=k(()=>a("div",{class:"identify"},"\u9A8C\u8BC1\u7801",-1)),re={style:{margin:"16px"}},de={__name:"Login",setup(e){let t=P(),o=z({username:"17001100999",password:"123456",isTitle:!0}),i=g(),l=g("1234567890"),r=g(""),I=m=>{i.value!=r.value?G("\u9A8C\u8BC1\u7801\u9519\u8BEF"):o.isTitle?O(o.username,o.password).then(n=>{n.resultCode==200&&(localStorage.setItem("mltoken",n.data),t.replace({path:"/user"}),w({type:"success",message:"\u767B\u5F55\u6210\u529F"}))}):Q(o.username,o.password).then(n=>{n.resultCode==200&&(w({type:"success",message:n.message}),o.isTitle=!0)})},T=()=>{},{username:c,password:f,isTitle:u}=W(o);function V(m,n){return Math.floor(Math.random()*(n-m)+m)}function v(){r.value="",C(l,4)}function C(m,n){for(let p=0;p<n;p++)r.value+=l.value[V(0,l.value.length)]}return $(()=>{r.value="",C(l,4)}),(m,n)=>{const p=D,H=R,N=U,L=E,B=q;return x(),S("div",ne,[a("header",null,[h(H,{title:s(u)?"\u767B\u5F55":"\u6CE8\u518C","left-arrow":"",onClickLeft:s(T)},{right:y(()=>[h(p,{name:"ellipsis",size:"18"})]),_:1},8,["title","onClickLeft"])]),ie,a("div",se,[h(B,{onSubmit:s(I)},{default:y(()=>[h(N,{modelValue:s(c),"onUpdate:modelValue":n[0]||(n[0]=d=>_(c)?c.value=d:c=d),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7"}]},null,8,["modelValue"]),h(N,{modelValue:s(f),"onUpdate:modelValue":n[1]||(n[1]=d=>_(f)?f.value=d:f=d),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),a("div",ae,[le,F(a("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":n[2]||(n[2]=d=>_(i)?i.value=d:i=d)},null,512),[[j,s(i)]]),a("div",{class:"code",onClick:v,style:{width:"112px"}},[a("div",{class:"code",onClick:v},[h(oe,{identifyCode:s(r)},null,8,["identifyCode"])])])]),a("div",re,[a("p",{class:"link-register",onClick:n[3]||(n[3]=d=>_(u)?u.value=!s(u):u=!s(u))},b(s(u)?"\u7ACB\u5373\u6CE8\u518C":"\u5DF2\u6709\u8D26\u53F7\uFF0C\u7ACB\u5373\u767B\u5F55"),1),h(L,{round:"",block:"","native-type":"submit"},{default:y(()=>[A(b(s(u)?"\u767B\u5F55":"\u6CE8\u518C"),1)]),_:1})])]),_:1},8,["onSubmit"])])])}}},me=M(de,[["__scopeId","data-v-523ee59a"]]);export{me as default};
